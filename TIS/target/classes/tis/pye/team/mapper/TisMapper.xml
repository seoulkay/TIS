<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="TisMapper">
  	<select id="selectEmployeeByAtosName" resultType="TisEmployee" parameterType="TisEmployee">
  		select
  		*
  		from
  		tis.employee
  		where 
  		event_id = #{event_id}
  		and first_name = #{first_name}
  		and last_name = #{last_name}
  	</select>
  	<select id="selectEmployeeByAtosId" resultType="TisEmployee" parameterType="TisEmployee">
  		select
  		*
  		from
  		tis.employee
  		where 
  		atos_id = #{atos_id}
  		and event_id = #{event_id}
  	</select>
  	<select id="selectAccomByAtosId" resultType="TisAccom" parameterType="TisEmployee">
  	SELECT 
	a.id
	,a.employee_id
	,a.venue_id
	,a.event_id
	,a.acc_room
	,a.acc_begin
	,a.acc_end
	,a.acc_pin
	,a.acc_desc
	,v.venue_pic
	,v.venue_name
	,v.venue_name_loc
	,v.venue_address
	,v.venue_address_loc
	,v.venue_desc
	FROM tis.accom a left join tis.venue v on a.venue_id = v.id 
	where a.event_id = #{id} 
	and a.employee_id = #{event_id};
  	</select>
  	<select id="selectAccomByAtosName" resultType="TisAccom" parameterType="TisEmployee">
  	SELECT 
	a.id
	,a.employee_id
	,a.venue_id
	,a.event_id
	,a.acc_room
	,a.acc_begin
	,a.acc_end
	,a.acc_pin
	,a.acc_desc
	,v.venue_pic
	,v.venue_name
	,v.venue_desc
	FROM tis.accom a left join tis.venue v on a.venue_id = v.id 
	where a.event_id = #{id} 
	
  	</select>
  	
  	<select id="selectActiveEvent" resultType="TisEvent">
  		select
  		*
  		from
  		tis.event
  		where 
 		active = 'Y'
  	</select>
  	<select id="selectFlightByAtosId" resultType="TisFlight" parameterType="TisEmployee">
  		select
  		*
  		from
  		tis.flight
  		where 
  		employee_id = #{id}
  		and event_id = #{event_id}
  	</select>
  	<select id="selectVenueByAtosId" resultType="TisVenue" parameterType="TisEmployee">
  		select
  		*
  		from
  		tis.venue
  		where 
  		event_id = #{event_id}
  	</select>
</mapper>